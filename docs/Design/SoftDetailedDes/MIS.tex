\documentclass[12pt, titlepage]{article}

\usepackage{amsmath, mathtools}

\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}
\usepackage{graphicx}

\hypersetup{
bookmarks=true,     % show bookmarks bar?
colorlinks=true,       % false: boxed links; true: colored links
linkcolor=red,          % color of internal links (change box color with linkbordercolor)
citecolor=blue,      % color of links to bibliography
filecolor=magenta,  % color of file links
urlcolor=cyan          % color of external links
}

\usepackage{array}

\externaldocument{../../SRS/SRS}

\input{../../Comments}
\input{../../Common}

\begin{document}

\title{Module Interface Specification for \progname{}}

\author{\authname}

\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
Date 1 & 1.0 & Notes\\
Date 2 & 1.1 & Notes\\
\bottomrule
\end{tabularx}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

See SRS Documentation at \url{https://github.com/jeff-rey-wang/utrition/blob/3c91ed8d891c50d14bab9dd2f7ddcd5d3d465f56/docs/SRS/SRS.pdf}

\wss{Also add any additional symbols, abbreviations or acronyms}

\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for Utrition. Utrition is an application that will provide the nutritional facts for an inputted food item. Users can provide input through text, voice, or image. Utrition will also log past input food data for users to easily view their eating habits and nutritional intake.

Complementary documents include the System Requirement Specifications
and Module Guide.  The full documentation and implementation can be
found at \url{https://github.com/jeff-rey-wang/utrition}.  \wss{provide the url for your repo}

\section{Notation}

\wss{You should describe your notation.  You can use what is below as
  a starting point.}

The structure of the MIS for modules comes from \citet{HoffmanAndStrooper1995},
with the addition that template modules have been adapted from
\cite{GhezziEtAl2003}.  The mathematical notation comes from Chapter 3 of
\citet{HoffmanAndStrooper1995}.  For instance, the symbol := is used for a
multiple assignment statement and conditional rules follow the form $(c_1
\Rightarrow r_1 | c_2 \Rightarrow r_2 | ... | c_n \Rightarrow r_n )$.

The following table summarizes the primitive data types used by \progname. 

\begin{center}
\renewcommand{\arraystretch}{1.2}
\noindent 
\begin{tabular}{l l p{7.5cm}} 
\toprule 
\textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\ 
\midrule
character & char & a single symbol or digit\\
integer & $\mathbb{Z}$ & a number without a fractional component in (-$\infty$, $\infty$) \\
natural number & $\mathbb{N}$ & a number without a fractional component in [1, $\infty$) \\
real & $\mathbb{R}$ & any number in (-$\infty$, $\infty$)\\
\bottomrule
\end{tabular} 
\end{center}

\noindent
The specification of \progname \ uses some derived data types: sequences, strings, and
tuples. Sequences are lists filled with elements of the same data type. Strings
are sequences of characters. Tuples contain a list of values, potentially of
different types. In addition, \progname \ uses functions, which
are defined by the data types of their inputs and outputs. Local functions are
described by giving their type signature followed by their specification.

\section{Module Decomposition}

The following table is taken directly from the Module Guide document for this project.

\begin{table}[h!]
\centering
\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
	\toprule
	\textbf{Level 1} & \textbf{Level 2}\\
	\midrule
	
	{Hardware-Hiding Module} & N/A \\
	\midrule
	
	\multirow{7}{0.3\textwidth}{Behaviour-Hiding Module} & Application Path Module\\
	& Home Page Module\\
	& Profile Page Module\\
	& Upload Page Module\\
	& Image Upload Module\\
	& Navigation Bar Module\\
	& Backend Communication Module\\ 
	& Nutrition Log Module\\
	& Manual Upload Module \\
	& Voice Upload Module \\
	& Food Entry Module \\
	\midrule
	
	\multirow{3}{0.3\textwidth}{Software Decision Module} & Image Classification Module\\
	& Input Pre-Processing Module\\
	& Training Dataset Module\\
	& Nutritional Data Retriever Module\\
	& User Log Data Structure Module\\
	\bottomrule
	
\end{tabular}
\caption{Module Hierarchy}
\label{TblMH}
\end{table}

\newpage
~\newpage

\section{MIS of Nutrition Log Module} \label{Module} \wss{Use labels for
  cross-referencing}

\wss{You can reference SRS labels, such as R\ref{R_Inputs}.}

\wss{It is also possible to use \LaTeX for hypperlinks to external documents.}

\subsection{Module}
nutritionLog.py
\wss{Short name for the module}

\subsection{Uses}
userLogData.py

\subsection{Syntax}

\subsubsection{Exported Constants}
None

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{2.5cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
disp\_data & - & React div element & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

None
\wss{Not all modules will have state variables.  State variables give the module
  a memory.}

\subsubsection{Environment Variables}
None
\wss{This section is not necessary for all modules.  Its purpose is to capture
  when the module has external interaction with the environment, such as for a
  device driver, screen interface, keyboard, file, etc.}

\subsubsection{Assumptions}
None
\wss{Try to minimize assumptions and anticipate programmer errors via
  exceptions, but for practical purposes assumptions are sometimes appropriate.}

\subsubsection{Access Routine Semantics}

\noindent disp\_data():
\begin{itemize}
	\item output: $out$ := (get\_data() != NULL) $\Rightarrow$ React div with user data $|$ (get\_data() == NULL) $\Rightarrow$ React div displaying String stating "No user data available"
	\item exception: None
\end{itemize}

\wss{A module without environment variables or state variables is unlikely to
  have a state transition.  In this case a state transition can only occur if
  the module is changing the state of another module.}

\wss{Modules rarely have both a transition and an output.  In most cases you
  will have one or the other.}

\subsubsection{Local Functions}
None
\wss{As appropriate} \wss{These functions are for the purpose of specification.
  They are not necessarily something that is going to be implemented
  explicitly.  Even if they are implemented, they are not exported; they only
  have local scope.}

\newpage

\section{MIS of Backend Communication Module} \label{Module}

\subsection{Module}

This module provides a way for user input to be passed to backend processing modules in order to eventually classify the input. This module is called after the user submits a valid input.

\subsection{Uses}

Input Pre-Processing Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2.5cm} p{0.5cm} p{4.5cm} p{5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
display\_index & - & JSON Object: Consists of the food classified from the user input & If POST, return filepath to user upload (default state before user action) \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

None

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

It is assumed that the filename of the user inputted file will be of String format.

\subsubsection{Access Routine Semantics}

None

\subsubsection{Local Functions}

None

\newpage

\section{MIS of Food Entry Module} \label{Module} \wss{Use labels for
	cross-referencing}

\wss{You can reference SRS labels, such as R\ref{R_Inputs}.}

\wss{It is also possible to use \LaTeX for hypperlinks to external documents.}

\subsection{Template Module}

foodEntry.py
\wss{Short name for the module}

\subsection{Uses}
N/A

\subsection{Syntax}

\subsubsection{Exported Types}
FoodEntry = ?

\subsubsection{Exported Constants}
None

\subsubsection{Exported Access Programs}

\begin{center}
	\begin{tabular}{p{3cm} p{5cm} p{5cm} p{2cm}}
		\hline
		\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
		\hline
		FoodEntry & String, tuple of (food\_name: String, calories: String, total\_fat: String, saturated\_fat: String, cholesterol: String, sodium: String, total\_carbohydrate: String, dietary\_fiber: String, sugars: String, protein: String, potassium: String) & FoodEntry & - \\
		get\_food\_name & - & String & - \\
		get\_food\_info & - & tuple of (food\_name: String, calories: String, total\_fat: String, saturated\_fat: String, cholesterol: String, sodium: String, total\_carbohydrate: String, dietary\_fiber: String, sugars: String, protein: String, potassium: String) & - \\
		\hline
	\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
food\_name: String\\
food\_info: tuple of (food\_name: String, calories: String, total\_fat: String, saturated\_fat: String, cholesterol: String, sodium: String, total\_carbohydrate: String, dietary\_fiber: String, sugars: String, protein: String, potassium: String)

\wss{Not all modules will have state variables.  State variables give the module
	a memory.}

\subsubsection{Environment Variables}

None

\wss{This section is not necessary for all modules.  Its purpose is to capture
	when the module has external interaction with the environment, such as for a
	device driver, screen interface, keyboard, file, etc.}

\subsubsection{Assumptions}

The FoodEntry(food\_name, food\_info) constructor is called for each object instance before any other access
routine is called for that object. The constructor can only be called once.

\wss{Try to minimize assumptions and anticipate programmer errors via
	exceptions, but for practical purposes assumptions are sometimes appropriate.}

\subsubsection{Access Routine Semantics}

\noindent FoodEntry($item, info$):
\begin{itemize}
	\item transition: $food\_name, food\_info :=$ item, info
	\item output: $out :=$ self
	\item exception: None
\end{itemize}

\noindent get\_food\_name():
\begin{itemize}
	\item output: $out :=$ food\_name
	\item exception: None
\end{itemize}

\noindent get\_food\_info():
\begin{itemize}
	\item output: $out :=$ food\_info
	\item exception: None
\end{itemize}

\wss{A module without environment variables or state variables is unlikely to
	have a state transition.  In this case a state transition can only occur if
	the module is changing the state of another module.}

\wss{Modules rarely have both a transition and an output.  In most cases you
	will have one or the other.}

\subsubsection{Local Functions}

None
\wss{As appropriate} \wss{These functions are for the purpose of specification.
	They are not necessarily something that is going to be implemented
	explicitly.  Even if they are implemented, they are not exported; they only
	have local scope.}

\newpage

\section{MIS of Nutritional Data Retriever Module} \label{Module} \wss{Use labels for
	cross-referencing}

\wss{You can reference SRS labels, such as R\ref{R_Inputs}.}

\wss{It is also possible to use \LaTeX for hypperlinks to external documents.}

\subsection{Module}

nutritionalDataFetcher.py
\wss{Short name for the module}

\subsection{Uses}
N/A

\subsection{Syntax}

\subsubsection{Exported Constants}
None

\subsubsection{Exported Access Programs}

\begin{center}
	\begin{tabular}{p{4cm} p{2cm} p{5cm} p{4.5cm}}
		\hline
		\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
		\hline
		get\_nutritional\_data & String & tuple of (food\_name: String, calories: String, total\_fat: String, saturated\_fat: String, cholesterol: String, sodium: String, total\_carbohydrate: String, dietary\_fiber: String, sugars: String, protein: String, potassium: String) & IllegalArgumentException \\
		\hline
	\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

None
\wss{Not all modules will have state variables.  State variables give the module
	a memory.}

\subsubsection{Environment Variables}

None
\wss{This section is not necessary for all modules.  Its purpose is to capture
	when the module has external interaction with the environment, such as for a
	device driver, screen interface, keyboard, file, etc.}

\subsubsection{Assumptions}

None
\wss{Try to minimize assumptions and anticipate programmer errors via
	exceptions, but for practical purposes assumptions are sometimes appropriate.}

\subsubsection{Access Routine Semantics}

\noindent get\_nutritional\_data(\textit{food\_item}):
\begin{itemize}
	\item output: result := tuple of (food\_name: String, calories: String, total\_fat: String, saturated\_fat: String, cholesterol: String, sodium: String, total\_carbohydrate: String, dietary\_fiber: String, sugars: String, protein: String, potassium: String)
	\item exception: (food\_item $\Rightarrow$ result := NULL) $\Rightarrow$ \mbox{IllegalArgumentException} 
\end{itemize}

\wss{A module without environment variables or state variables is unlikely to
	have a state transition.  In this case a state transition can only occur if
	the module is changing the state of another module.}

\wss{Modules rarely have both a transition and an output.  In most cases you
	will have one or the other.}

\subsubsection{Local Functions}
None

\wss{As appropriate} \wss{These functions are for the purpose of specification.
	They are not necessarily something that is going to be implemented
	explicitly.  Even if they are implemented, they are not exported; they only
	have local scope.}

\newpage

\section{MIS of User Log Data Structure Module} \label{Module} \wss{Use labels for
	cross-referencing}

\wss{You can reference SRS labels, such as R\ref{R_Inputs}.}

\wss{It is also possible to use \LaTeX for hypperlinks to external documents.}

\subsection{Module}

userLogData.py
\wss{Short name for the module}

\subsection{Uses}
foodEntry.py

\subsection{Syntax}

\subsubsection{Exported Constants}
None

\subsubsection{Exported Access Programs}

\begin{center}
	\begin{tabular}{p{2cm} p{5cm} p{3cm} p{2cm}}
		\hline
		\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
		\hline
		add\_data & String, tuple of (food\_name: String, calories: String, total\_fat: String, saturated\_fat: String, cholesterol: String, sodium: String, total\_carbohydrate: String, dietary\_fiber: String, sugars: String, protein: String, potassium: String) & - & - \\
		get\_data & - & seq of FoodEntry & - \\
		\hline
	\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
userData: seq of FoodEntry

\wss{Not all modules will have state variables.  State variables give the module
	a memory.}

\subsubsection{Environment Variables}

None

\wss{This section is not necessary for all modules.  Its purpose is to capture
	when the module has external interaction with the environment, such as for a
	device driver, screen interface, keyboard, file, etc.}

\subsubsection{Assumptions}

None

\wss{Try to minimize assumptions and anticipate programmer errors via
	exceptions, but for practical purposes assumptions are sometimes appropriate.}

\subsubsection{Access Routine Semantics}

\noindent add\_data($food\_item, food\_info$):
\begin{itemize}
	\item transition: userData += new FoodEntry($food\_item$, $food\_info$)
	\item exception: None
\end{itemize}

\noindent get\_data():
\begin{itemize}
	\item output: $out :=$ userData 
	\item exception: None
\end{itemize}

\wss{A module without environment variables or state variables is unlikely to
	have a state transition.  In this case a state transition can only occur if
	the module is changing the state of another module.}

\wss{Modules rarely have both a transition and an output.  In most cases you
	will have one or the other.}

\subsubsection{Local Functions}

None
\wss{As appropriate} \wss{These functions are for the purpose of specification.
	They are not necessarily something that is going to be implemented
	explicitly.  Even if they are implemented, they are not exported; they only
	have local scope.}

\newpage

\section{MIS of Image Classification Module} \label{Module}

\subsection{Module}

This module takes image data formatted as a pixel array and returns the name of the food identified in the input image. This module is called from the Input Pre-Processing Module after it constructs the pixel array of the uploaded image.

\subsection{Uses}

Training Dataset Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
startModel & Array: Pixel array of the uploaded image file & String: Name of the
food classified from
the user input & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

weights: integer tensor with a size of 3072 by 100

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

\begin{itemize}
	\item{It is assumed that there is a relationship between the uploaded image and the image labels that the machine learning model is aware of.}
	
	\item{It is assumed that the food in an uploaded image has a one to one relation with a label that the machine learning model is aware of.}
\end{itemize}

\subsubsection{Access Routine Semantics}

None

\subsubsection{Local Functions}

tf.compat.v1.train.GradientDescentOptimizer(learning\_rate).minimize(loss): Execute GradientDescentOptimizer and tries to minimize loss by computing the gradients of its trainable variables. Optimizes weights system variable on pass.

\newpage

\section{MIS of Input Pre-Processing Module} \label{Module}

\subsection{Module}

This module converts a user uploaded image into a pixel array and calls the Image Classification Module with the constructed pixel array. This module is called from the Backend Communication Module after it constructs the filepath to the uploaded image.

\subsection{Uses}

Image Classification Module

\subsection{Syntax}

\subsubsection{Exported Constants}

None

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
open & String: Filepath of user uploaded image file & String: Name of the
food classified from
the user input & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

None

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

It is assumed that there exists a valid image file at the provided image filepath.

\subsubsection{Access Routine Semantics}

None

\subsubsection{Local Functions}

None

\newpage

\section{MIS of Training Dataset Module} \label{Module}

\subsection{Module}

This module constructs data sets of image and label data from the CIFAR-100 image training files. These datasets are what user-uploaded images are compared against in the Image Classification Module to identify the food present in the images. 

\subsection{Uses}

None

\subsection{Syntax}

\subsubsection{Exported Constants}

None

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
load\_data & \item{Array: Pixel array of the uploaded image file} \item{Integer: Flag to denote if an image was uploaded by the user} & Dictionary: Image labels and classes used in the machine learning model & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

None

\subsubsection{Environment Variables}

None

\subsubsection{Assumptions}

It is assumed the filepath and filetype of the CIFAR-100 datasets are respectively constant and standard.

\subsubsection{Access Routine Semantics}

None

\subsubsection{Local Functions}

\begin{itemize}
	\item{unpickle(file): takes in a filepath and opens it into bytestream. Specific dictionary entries are retrieved and returned depending on the filepath that was passed as an argument}
	
	\item{main(): used for debugging a single file. Calls load\_data(None, None) and prints the resulting retrieved dictionary entries. }
\end{itemize}

\newpage



\section{MIS of Upload Page Module}



\subsection{Module}

Upload

\subsection{Uses}

imageupload, voiceupload

\subsection{Syntax}

\subsubsection{Exported Constants}

upload

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\wss{accessProg} & - & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}



\subsubsection{Environment Variables}



\subsubsection{Assumptions}



\subsubsection{Access Routine Semantics}

\noindent \wss{accessProg}():
\begin{itemize}
\item transition: \wss{if appropriate} 
\item output: \wss{if appropriate} 
\item exception: \wss{if appropriate} 
\end{itemize}



\subsubsection{Local Functions}


\newpage






\section{MIS of Profile Page Module}



\subsection{Module}

Profile

\subsection{Uses}

NutritionLog

\subsection{Syntax}

\subsubsection{Exported Constants}

Profile

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\wss{accessProg} & - & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}



\subsubsection{Environment Variables}


\subsubsection{Assumptions}


\subsubsection{Access Routine Semantics}

\noindent \wss{accessProg}():
\begin{itemize}
\item transition: \wss{if appropriate} 
\item output: \wss{if appropriate} 
\item exception: \wss{if appropriate} 
\end{itemize}




\subsubsection{Local Functions}



\newpage


\section{MIS of Home Page Module}



\subsection{Module}

Home

\subsection{Uses}

NutritionLog

\subsection{Syntax}

\subsubsection{Exported Constants}

Profile

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\wss{accessProg} & - & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}



\subsubsection{Environment Variables}


\subsubsection{Assumptions}


\subsubsection{Access Routine Semantics}

\noindent \wss{accessProg}():
\begin{itemize}
\item transition: \wss{if appropriate} 
\item output: \wss{if appropriate} 
\item exception: \wss{if appropriate} 
\end{itemize}




\subsubsection{Local Functions}



\newpage

\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\newpage

\section{Appendix} \label{Appendix}

\wss{Extra information if required}

\end{document}
